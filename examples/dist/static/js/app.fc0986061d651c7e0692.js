webpackJsonp([1],{165:function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}var a=i(79),n=s(a),h=i(421),o=s(h),r=i(175),l=s(r);i(411),i(410),i(412),i(413);var d=i(169),u=s(d);n.default.use(u.default),new n.default({el:"#app",router:l.default,template:"<Index/>",components:{Index:o.default}})},167:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(419),a=function(t){return t&&t.__esModule?t:{default:t}}(s);a.default.install=function(t){t.component(a.default.name,a.default)},e.default=a.default},168:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(420),a=function(t){return t&&t.__esModule?t:{default:t}}(s);a.default.install=function(t){t.component(a.default.name,a.default)},e.default=a.default},169:function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=i(168),n=s(a),h=i(167),o=s(h),r=i(170),l=s(r),d=[n.default,o.default],u=function(t){d.forEach(function(e){t.component(e.name,e)}),t.directive("clickoutside",l.default)};"undefined"!=typeof window&&window.Vue&&u(window.Vue),e.default={version:"1.0.0",install:u,DraggableResizable:n.default,DeskDrag:o.default}},170:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(79),a=function(t){return t&&t.__esModule?t:{default:t}}(s),n=i(171),h=[],o="@@clickoutsideContext",r=void 0;!a.default.prototype.$isServer&&(0,n.on)(document,"mousedown",function(t){return r=t}),!a.default.prototype.$isServer&&(0,n.on)(document,"mouseup",function(t){h.forEach(function(e){return e[o].documentHandler(t,r)})}),e.default={bind:function(t,e,i){var s=h.push(t)-1,a=function(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!(i.context&&s.target&&a.target)||t.contains(s.target)||t.contains(a.target)||t===s.target||i.context.popperElm&&(i.context.popperElm.contains(s.target)||i.context.popperElm.contains(a.target))||(e.expression&&t[o].methodName&&i.context[t[o].methodName]?i.context[t[o].methodName]():t[o].bindingFn&&t[o].bindingFn())};t[o]={id:s,documentHandler:a,methodName:e.expression,bindingFn:e.value}},update:function(t,e){t[o].methodName=e.expression,t[o].bindingFn=e.value},unbind:function(t){for(var e=h.length,i=0;i<e;i++)if(h[i][o].id===t[o].id){h.splice(i,1);break}}}},171:function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(t){for(var i=t.className,s=(e||"").split(" "),a=0,n=s.length;a<n;a++){var h=s[a];h&&(t.classList?t.classList.add(h):D(t,h)||(i+=" "+h))}t.classList||(t.className=i)}}function n(t,e){if(t&&e){for(var i=(e||"").split(" "),s=" "+t.className+" ",a=0,n=i.length;a<n;a++){var h=i[a];h&&(t.classList?t.classList.remove(h):D(t,h)&&(s=s.replace(" "+h+" "," ")))}t.classList||(t.className=g(s))}}function h(t,e,i){if(t&&e)if("object"===(void 0===e?"undefined":(0,r.default)(e)))for(var s in e)e.hasOwnProperty(s)&&h(t,s,e[s]);else e=p(e),"opacity"===e&&m<9?t.style.filter=isNaN(i)?"":"alpha(opacity="+100*i+")":t.style[e]=i}Object.defineProperty(e,"__esModule",{value:!0}),e.getStyle=e.hasClass=e.once=e.off=e.on=void 0;var o=i(180),r=s(o);e.addClass=a,e.removeClass=n,e.setStyle=h;var l=i(79),d=s(l),u=d.default.prototype.$isServer,c=/([\:\-\_]+(.))/g,f=/^moz([A-Z])/,m=u?0:Number(document.documentMode),g=function(t){return(t||"").replace(/^[\s\uFEFF]+|[\s\uFEFF]+$/g,"")},p=function(t){return t.replace(c,function(t,e,i,s){return s?i.toUpperCase():i}).replace(f,"Moz$1")},v=e.on=function(){return!u&&document.addEventListener?function(t,e,i){t&&e&&i&&t.addEventListener(e,i,!1)}:function(t,e,i){t&&e&&i&&t.attachEvent("on"+e,i)}}(),w=e.off=function(){return!u&&document.removeEventListener?function(t,e,i){t&&e&&t.removeEventListener(e,i,!1)}:function(t,e,i){t&&e&&t.detachEvent("on"+e,i)}}(),D=(e.once=function(t,e,i){v(t,e,function s(){i&&i.apply(this,arguments),w(t,e,s)})},e.hasClass=function(t,e){if(!t||!e)return!1;if(-1!=e.indexOf(" "))throw new Error("className should not contain space.");return t.classList?t.classList.contains(e):(" "+el.className+" ").indexOf(" "+e+" ")>-1});e.getStyle=m<9?function(t,e){if(!u){if(!t||!e)return null;e=p(e),"float"===e&&(e="styleFloat");try{switch(e){case"opacity":try{return t.filters.item("alpha").opacity/100}catch(t){return 1}default:return t.style[e]||t.currentStyle?t.currentStyle[e]:null}}catch(i){return t.style[e]}}}:function(t,e){if(!u){if(!t||!e)return null;e=p(e),"float"===e&&(e="cssFloat");try{var i=document.defaultView.getComputedStyle(t,"");return t.style[e]||i?i[e]:null}catch(i){return t.style[e]}}}},172:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(177),a=function(t){return t&&t.__esModule?t:{default:t}}(s);e.default={name:"TDeskDrag",data:function(){return{itemDragStop:!0,itemResizing:!1,rectWidth:12,rectHeight:6,tarWidth:1280,blockWidth:104,offLeft:0,moveLeft:0,showDragMenu:!1,rightMenuStyle:{left:0,top:0},urlMinWidth:3,urlMinHeight:2,currentView:0,targetCurrentView:0,selectModule:null,moduleApiData:[],moduleData:[{uiKey:1,moduleItem:[]}],moveSpaceData:[],moduleRect:[],spaceRect:[]}},props:{width:{type:[Number,String],default:1346},height:{type:[Number,String],default:739},sourceData:Array,isfixed:String},computed:{mainLeft:function(){return-this.currentView*this.tarWidth-this.moveLeft},movePageStyle:function(){var t=this.rectHeight*this.blockWidth,e=this.height-t-25,i=0;return e<30?i=Math.abs(e/2):e<57&&(i=15-(e-30)/2),{width:this.tarWidth*this.moduleData.length+"px",left:-this.currentView*this.tarWidth-this.moveLeft+"px",height:this.rectHeight*this.blockWidth+"px",marginTop:-this.rectHeight*this.blockWidth/2-i+"px"}},widthHeight:function(){return this.width+this.height},rectWidthHeight:function(){return this.rectWidth+this.rectHeight},dragPageStyle:function(){var t=this.rectHeight*this.blockWidth;return this.height-t-25<62?{bottom:0}:{top:((this.height<this.minWindowHeight?this.minWindowHeight:this.height)-25-t)/2+10+t+"px"}}},watch:{rectWidthHeight:function(){this.createSpaceRect(),this.updateDragPos(this.moduleApiData)},widthHeight:function(){this.monitorWidthHeight()}},methods:{moduleItemDeptChangeEvn:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments[1],i=$("#module_item_"+e.uiId);if(i.length){var s=i[0].contentWindow.iframeVm;s&&"function"==typeof s.toChangeDept&&s.toChangeDept({deptCode:t})}},moduleItemRefreshEvn:function(t){var e=$(t.target).parents(".module_item_tt").next(".module_item_url").find("iframe");e.length&&e.attr("src",e.attr("src"))},mouseWheel:function(t){var e=this,i=-t.wheelDelta||t.detail;(!this.isMouserWheel&&this.currentView+1<this.moduleData.length&&i<0||this.currentView>0&&i>0)&&(this.isMouserWheel=!0,this.turnRightView(i<0),setTimeout(function(){e.isMouserWheel=!1},300))},monitorWidthHeight:function(){var t=this.width-this.minWindowWidth,e=this.height-this.minWindowHeight;t<=0?(this.rectWidth=8,this.offLeft=(this.minWindowWidth-this.rectWidth*this.blockWidth)/2,this.tarWidth=this.minWindowWidth):(this.rectWidth=8+parseInt(t/this.blockWidth),this.offLeft=(this.width-this.rectWidth*this.blockWidth)/2,this.tarWidth=this.width),this.rectHeight=e<=0?4:4+parseInt(e/this.blockWidth)},updateDragPos:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=!1;this.moduleApiData=[];for(var i=(new Date).getTime(),s=0,n=t.length;s<n;s++){var h=(0,a.default)({},t[s]);h.uiId=s+"_"+h.id+"_"+i,h.height>this.rectHeight&&(h.height=this.rectHeight,e=!0),h.width>this.rectWidth&&(h.width=this.rectWidth,e=!0),this.moduleApiData.push(h)}e&&this.$emit("drag-change",this.cloneFirstData(this.moduleApiData)),this.turnModuleData(),this.setModulePos()&&this.$emit("drag-change",this.cloneFirstData(this.moduleApiData))},resetDeskDrag:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.updateDragPos(t)},addDeskDrag:function(t){this.moduleApiData.push(t),this.updateDragPos(this.moduleApiData)},activated:function(t,e){this.selectModule=(0,a.default)({},e)},deactivated:function(){},resizestop:function(t,e){var i=this;this.selectModule=(0,a.default)({},e),this.itemDragStop=!0,this.$nextTick(function(){var e=Math.round(t.width/i.blockWidth),s=Math.round(t.height/i.blockWidth),n=Math.round(t.top/i.blockWidth),h=Math.round((t.left-i.tarWidth*i.currentView-i.offLeft)/i.blockWidth);if(n<0&&(n=0),h<0&&(h=0),e<=i.selectModule.width&&s<=i.selectModule.height){var o=(0,a.default)({},i.selectModule,{width:e,height:s,top:n,left:h});i.updateItemPos(o),i.setRectStatus(i.selectModule),i.setRectStatus(o,!0),i.updateApiData();var r=i.selectModule;r.width==e&&r.height==s&&r.top==n&&r.left==h||i.$emit("drag-change",i.cloneFirstData(i.moduleApiData))}else{s+n>i.rectHeight&&(s=i.rectHeight-n),e+h>i.rectWidth&&(e=i.rectWidth-h);for(var l=(0,a.default)({},i.selectModule,{width:e,height:s,top:n,left:h}),d=i.findPosByRect(l),u=[],c=0;c<d.length;c++){var f=d[c];l.id!=f.id&&(i.deleteModuleItemData(f),i.setRectStatus(f),u.push(f))}i.setRectStatus(i.selectModule),i.setRectStatus(l,!0),i.updateItemPos(l);for(var m=0;m<u.length;m++)u[m].updatepos=!u[m].updatepos,i.addByItem(u[m]);i.updateApiData(),i.$emit("drag-change",i.cloneFirstData(i.moduleApiData))}i.itemResizing=!1})},resizing:function(t,e){this.itemDragStop=!1,this.itemResizing=!0,this.selectModule=(0,a.default)({},e)},dragstop:function(t){var e=this;this.itemDragStop=!0,this.timer&&clearTimeout(this.timer),this.$nextTick(function(){e.moveLeft=0;var i=Math.floor(t.left/e.tarWidth),s=Math.round((t.left-e.tarWidth*i-e.offLeft)/e.blockWidth),n=Math.round(t.top/e.blockWidth);if(n<0&&(n=0),n>e.rectHeight-e.selectModule.height&&(n=e.rectHeight-e.selectModule.height),i<0&&(i=0,s=0),s<0?s=0:s>e.rectWidth-e.selectModule.width&&(s=e.rectWidth-e.selectModule.width),s==e.selectModule.left&&n==e.selectModule.top&&i==e.selectModule.viewIndex)t.changePos(s*e.blockWidth+e.tarWidth*e.selectModule.viewIndex+e.offLeft,n*e.blockWidth);else{var h=(0,a.default)({},e.selectModule,{left:s,top:n,uiKey:(new Date).getTime(),viewIndex:i});e.currentView=i;var o=e.findPosByRect(h);e.deleteModuleItemData(e.selectModule),e.setRectStatus(e.selectModule);for(var r=[],l=0;l<o.length;l++){var d=o[l];h.id!=d.id&&(e.deleteModuleItemData(d),e.setRectStatus(d),r.push(d))}h.updatepos=!h.updatepos,e.directAddByItem(h);for(var u=0;u<r.length;u++)r[u].updatepos=!r[u].updatepos,e.addByItem(r[u]);e.updateApiData(),e.$emit("drag-change",e.cloneFirstData(e.moduleApiData)),e.selectModule=h}e.createdMove=!1,e.isSecond=!1,e.targetCurrentView=e.currentView,e.clearNullLast()})},dragging:function(t,e){this.selectModule=(0,a.default)({},e),this.timer&&clearTimeout(this.timer),this.targetCurrentView=Math.floor(t.left/this.tarWidth),this.isSecond?(this.createdMove||(this.setMoveSpaceData(e),this.createdMove=!0),this.itemDragStop=!1):(this.isSecond=!0,this.itemDragStop=!0);var i=t.left-this.currentView*this.tarWidth-this.moveLeft,s=i+this.selectModule.width*this.blockWidth-this.tarWidth;s>0?this.dragOverRightPage(s,t,e):i<0&&this.dragOverLeftPage(s,t)},setMoveSpaceData:function(t){var e=(0,a.default)({},t);e.width=1,e.height=1,this.moveSpaceData=[],this.clearMoveRect();for(var i=(new Date).getTime(),s=0,n=this.moduleRect.length;s<n;s++){for(var h=this.moduleRect[s],o=h.length,r=[],l=0;l<o;l++)for(var d=h[l],u=d.length,c=0;c<u;c++){var f=d[c].curId,m=d[c].spacePos;if(!f&&!m){var g={top:l,left:c,width:e.width,height:e.height,viewIndex:s,id:s+"_"+l+"_"+c+"_"+i};if(1==e.width&&1==e.height)r.push(g),m=!0;else{if(e.width>u-c||e.height>o-l)break;if(!this.hasEnoughRow(l,e,c)){for(var p=!1,v=-1,w=c+1;w<c+e.width;w++){if(d[w].curId||d[w].spacePos){p=!0,v=w;break}if(this.hasEnoughRow(l,e,w)){p=!0,v=w;break}}p?c=v:(r.push(g),this.setMoveRectStatus(g,!0),c=c+e.width-1)}}}}this.moveSpaceData.push({uiKey:s+"_"+i,moduleItem:r})}},clearMoveRect:function(){for(var t=0,e=this.moduleRect.length;t<e;t++)for(var i=this.moduleRect[t],s=i.length,a=0;a<s;a++)for(var n=i[a],h=n.length,o=0;o<h;o++)n[o].spacePos=!1},updateItemPos:function(t){for(var e=this.moduleData[t.viewIndex].moduleItem,i=0,s=e.length;i<s;i++)if(t.id==e[i].id){e[i]=(0,a.default)(e[i],t,{updatepos:!e[i].updatepos});break}},dragOverRightPage:function(t,e,i){var s=this,a=10;a=t<64?6:t<148?10:20;var n=e.left,h=0;this.timer=setInterval(function(){var t=(s.moduleData.length-1)*s.tarWidth+s.mainLeft;t<=0?s.moduleData[s.moduleData.length-1].moduleItem.length?(s.addModuleAndRect(),s.setMoveSpaceData(i)):s.timer&&clearTimeout(s.timer):(t<a&&0!=t?(h+=t,s.moveLeft+=t):(h+=a,s.moveLeft+=a),e.changePos(n+h,e.top))},10)},dragOverLeftPage:function(t,e){var i=this,s=10;s=t>-64?-6:t>-148?-10:-20;var a=e.left,n=0;this.timer=setInterval(function(){var t=i.mainLeft;t>=0?i.timer&&clearTimeout(i.timer):(t>s&&0!=t?(n+=t,i.moveLeft+=t):(n+=s,i.moveLeft+=s),e.changePos(a+n,e.top))},10)},directAddByItem:function(t){this.moduleData[t.viewIndex].moduleItem.push(t),this.setRectStatus(t,!0)},addByItem:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=null,s=e;s<this.moduleRect.length;s++){t.viewIndex=s;var a=this.pushItemToRect(t);if(a){this.directAddByItem(a),i=a;break}}return i||(this.addModuleAndRect(),this.addByItem(t,this.moduleRect.length-1))},cloneModuleData:function(t){for(var e=[],i=0;i<t.length;i++){for(var s=t[i].moduleItem,n=[],h=0,o=s.length;h<o;h++)n.push((0,a.default)({},s[h]));e.push((0,a.default)({},t[i],{moduleItem:n}))}return e},cloneFirstData:function(t){for(var e=[],i=0;i<t.length;i++)e.push((0,a.default)({},t[i]));return e},cloneSecondData:function(t){for(var e=[],i=0;i<t.length;i++){for(var s=t[i],n=[],h=0,o=s.length;h<o;h++)n.push((0,a.default)({},s[h]));e.push(n)}return e},deleteModuleItemData:function(t){for(var e=this.moduleData[t.viewIndex].moduleItem,i=0;i<e.length;i++)if(e[i].id==t.id){e.splice(i,1);break}},findPosByRect:function(t){for(var e=t.viewIndex,i=this.moduleRect[e],s=[],a=t.top,n=t.top+t.height;a<n;a++)for(var h=t.left,o=t.left+t.width;h<o;h++)i[a][h].curId&&s.push(i[a][h].curId);if(!s.length)return[];for(var r=this.uniqueArr(s),l=[],d=0,u=r.length;d<u;d++)for(var c=0,f=this.moduleApiData.length;c<f;c++)if(this.moduleApiData[c].id==r[d]){l.push(this.moduleApiData[c]);break}return l},uniqueArr:function(t){for(var e=[],i=[],s=t.length,a=0;a<s;a++){for(var n=a+1;n<s;n++)t[a]===t[n]&&(a++,n=a);e.push(t[a]),i.push(a)}return e},initModulePos:function(){for(var t=0;t<this.moduleData.length;t++)for(var e=this.moduleData[t].moduleItem,i=e.length,s=0;s<i;s++){var n=e[s];n.viewIndex=t;var h=this.pushItemToRect(n);if(h)this.setRectStatus(h,!0);else{var o=(0,a.default)({},n);e.splice(s,1),this.moduleData.length<=t+1&&this.addModuleAndRect(),this.moduleData[t+1].moduleItem.push(o),s--,i--}}this.updateApiData()},setModulePos:function(){for(var t=!1,e=0;e<this.moduleData.length;e++)for(var i=this.moduleData[e].moduleItem,s=i.length,n=0;n<s;n++){var h=i[n];if(this.getStatusRect(h)){t=!0,h.viewIndex=e;var o=this.pushItemToRect(h);if(o)this.setRectStatus(o,!0);else{var r=(0,a.default)({},h);i.splice(n,1),this.moduleData.length<=e+1&&this.addModuleAndRect(),this.moduleData[e+1].moduleItem.push(r),n--,s--}}else this.setRectStatus(h,!0)}return this.updateApiData(),t},getStatusRect:function(t){var e=!1;if(this.moduleRect.length<t.viewIndex+1)return!0;for(var i=t.top,s=t.top+t.height;i<s;i++){var a=this.moduleRect[t.viewIndex][i];if(!a)return!0;for(var n=t.left;n<t.left+t.width;n++)if(!a[n]||a[n].curId){e=!0;break}if(e)break}return e},updateApiData:function(){this.moduleApiData=[];for(var t=0;t<this.moduleData.length;t++){var e=this.moduleData[t].moduleItem;this.moduleApiData=this.moduleApiData.concat(e),e=null}},pushItemToRect:function(t){for(var e=!1,i=null,s=this.moduleRect[t.viewIndex].length,n=0,h=s;n<h;n++){for(var o=this.moduleRect[t.viewIndex][n],r=o.length,l=0;l<r;l++){if(!o[l].curId){if(i={top:n,left:l},1==t.width&&1==t.height){e=!0;break}if(t.width>r-l||t.height>s-n)break;if(!this.hasEnoughRow(n,t,l)){for(var d=!1,u=-1,c=l+1;c<l+t.width;c++){if(o[c].curId){d=!0,u=c;break}if(this.hasEnoughRow(n,t,c)){d=!0,u=c;break}}if(!d){e=!0;break}l=u}}}if(e)break}return e?(0,a.default)(t,i):null},hasEnoughRow:function(t,e,i){for(var s=t+1,a=t+e.height,n=!1,h=this.moduleRect[e.viewIndex],o=s;o<a;o++)if(h[o][i].curId){n=!0;break}return n},setRectStatus:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.moduleRect[t.viewIndex],s=e?t.id:"",a=t.top,n=t.height+t.top;a<n;a++)for(var h=t.left,o=t.width+t.left;h<o;h++)i[a][h].curId=s},setMoveRectStatus:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.moduleRect[t.viewIndex],s=t.top,a=t.height+t.top;s<a;s++)for(var n=t.left,h=t.width+t.left;n<h;n++)i[s][n].spacePos=e},createSpaceRect:function(){this.spaceRect=[];for(var t=0,e=this.rectHeight;t<e;t++){for(var i=[],s=0,a=this.rectWidth;s<a;s++)i.push({curId:"",spacePos:!1});this.spaceRect.push(i)}},addModuleAndRect:function(){this.moduleData.push({uiKey:"moduleData_"+(new Date).getTime(),moduleItem:[],update:!1}),this.moduleRect.push(this.cloneSecondData(this.spaceRect))},turnModuleData:function(){this.moduleData=[{uiKey:(new Date).getTime(),moduleItem:[]}],this.moduleRect=[this.cloneSecondData(this.spaceRect)],this.currentView=0,this.targetCurrentView=0;for(var t=0,e=this.moduleApiData.length;t<e;t++){var i=(0,a.default)({uiKey:(new Date).getTime(),updatepos:!1},this.moduleApiData[t]);if(i.viewIndex+1>this.moduleData.length)for(var s=this.moduleData.length;s<i.viewIndex+1;s++)this.addModuleAndRect();this.moduleData[i.viewIndex].moduleItem.push(i)}},clearHeadNullModuleData:function(){for(var t=!1,e=!1,i=0;i<this.moduleData.length;i++){var s=this.moduleData[i];t||s.moduleItem.length?t=!0:(this.moduleData.splice(i,1),this.moduleRect.splice(i,1),i--,e=!0)}e&&(this.changeItemInData(),this.updateApiData(),this.$emit("drag-change",this.cloneFirstData(this.moduleApiData)))},changeItemInData:function(){for(var t=0,e=this.moduleData.length;t<e;t++)for(var i=this.moduleData[t].moduleItem,s=0,a=i.length;s<a;s++)i[s].viewIndex=t},clearNullLast:function(){for(var t=!0,e=this.moduleData.length-1;e>=0;e--){!this.moduleData[e].moduleItem.length&&t?(this.moduleData.pop(),this.moduleRect.pop()):t=!1}},turnRightView:function(){arguments.length>0&&void 0!==arguments[0]&&!arguments[0]?this.currentView--:this.currentView++,this.targetCurrentView=this.currentView},contextMenu:function(){this.showDragMenu=!0;var t=this.$refs.deskDragBox.getBoundingClientRect(),e=t.left,i=t.top,s=t.width,a=t.height;event.clientX-e+130>s?this.rightMenuStyle.left=s-130+e+"px":this.rightMenuStyle.left=event.pageX-e+"px",event.clientY-i+50>a?this.rightMenuStyle.top=a+i-50+"px":this.rightMenuStyle.top=event.pageY-i+"px"},dragClickOutside:function(){this.showDragMenu=!1},cancelDragFixed:function(){this.deleteModuleItemData(this.selectModule),this.setRectStatus(this.selectModule),this.updateApiData(),this.showDragMenu=!1,this.$emit("drag-delete",this.selectModule,this.cloneFirstData(this.moduleApiData))},dragDblClick:function(t){this.$emit("drag-dblclick",t)}},created:function(){this.isMouserWheel=!1,this.minWindowWidth=930,this.minWindowHeight=478,this.monitorWidthHeight(),this.createSpaceRect()},mounted:function(){}}},173:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={replace:!0,name:"TDraggableResizable",props:{active:{type:Boolean,default:!1},draggable:{type:Boolean,default:!0},resizable:{type:Boolean,default:!0},w:{type:Number,default:200,validator:function(t){return t>0}},h:{type:Number,default:200,validator:function(t){return t>0}},minw:{type:Number,default:50,validator:function(t){return t>0}},minh:{type:Number,default:50,validator:function(t){return t>0}},x:{type:Number,default:0,validator:function(t){return"number"==typeof t}},y:{type:Number,default:0,validator:function(t){return"number"==typeof t}},z:{type:[String,Number],default:"auto",validator:function(t){return"string"==typeof t?"auto"===t:t>=0}},handles:{type:Array,default:function(){return["tl","tm","tr","mr","br","bm","bl","ml"]}},axis:{type:String,default:"both",validator:function(t){return-1!==["x","y","both"].indexOf(t)}},grid:{type:Array,default:function(){return[1,1]}},parent:{type:Boolean,default:!1},maximize:{type:Boolean,default:!1},updatepos:{type:Boolean,default:!1}},created:function(){this.parentX=0,this.parentW=9999,this.parentY=0,this.parentH=9999,this.mouseX=0,this.mouseY=0,this.lastMouseX=0,this.lastMouseY=0,this.mouseOffX=0,this.mouseOffY=0,this.elmX=0,this.elmY=0,this.elmW=0,this.elmH=0},mounted:function(){document.documentElement.addEventListener("mousemove",this.handleMove,!0),document.documentElement.addEventListener("mousedown",this.deselect,!0),document.documentElement.addEventListener("mouseup",this.handleUp,!0),this.elmX=parseInt(this.$el.style.left),this.elmY=parseInt(this.$el.style.top),this.elmW=this.$el.offsetWidth||this.$el.clientWidth,this.elmH=this.$el.offsetHeight||this.$el.clientHeight,this.reviewDimensions(),this.zIndex="auto"},beforeDestroy:function(){document.documentElement.removeEventListener("mousemove",this.handleMove,!0),document.documentElement.removeEventListener("mousedown",this.deselect,!0),document.documentElement.removeEventListener("mouseup",this.handleUp,!0)},data:function(){return{top:this.y,left:this.x,width:this.w,height:this.h,resizing:!1,dragging:!1,enabled:this.active,handle:null,zIndex:this.z}},methods:{reviewDimensions:function(){if(this.minw>this.w&&(this.width=this.minw),this.minh>this.h&&(this.height=this.minh),this.parent){var t=parseInt(this.$el.parentNode.clientWidth,10),e=parseInt(this.$el.parentNode.clientHeight,10);this.parentW=t,this.parentH=e,this.w>this.parentW&&(this.width=t),this.h>this.parentH&&(this.height=e),this.x+this.w>this.parentW&&(this.width=t-this.x),this.y+this.h>this.parentH&&(this.height=e-this.y),this.elmW=this.width,this.elmH=this.height}},elmDown:function(t){var e=t.target||t.srcElement;this.$el.contains(e)&&(this.reviewDimensions(),this.enabled||(this.enabled=!0,this.$emit("activated",this),this.$emit("update:active",!0)),this.draggable&&(this.dragging=!0))},deselect:function(t){this.mouseX=t.pageX||t.clientX+document.documentElement.scrollLeft,this.mouseY=t.pageY||t.clientY+document.documentElement.scrollTop,this.lastMouseX=this.mouseX,this.lastMouseY=this.mouseY;var e=t.target||t.srcElement,i=new RegExp("handle-([trmbl]{2})","");this.$el.contains(e)||i.test(e.className)||this.enabled&&(this.enabled=!1,this.$emit("deactivated"),this.$emit("update:active",!1))},handleDown:function(t,e){this.handle=t,e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),this.resizing=!0},fillParent:function(t){var e=this;if(this.parent&&this.resizable&&this.maximize){var i=!1,s=function t(){i||window.requestAnimationFrame(t),"x"===e.axis?e.width===e.parentW&&e.left===e.parentX&&(i=!0):"y"===e.axis?e.height===e.parentH&&e.top===e.parentY&&(i=!0):"both"===e.axis&&e.width===e.parentW&&e.height===e.parentH&&e.top===e.parentY&&e.left===e.parentX&&(i=!0),"x"!==e.axis&&"both"!==e.axis||(e.width<e.parentW&&(e.width++,e.elmW++),e.left>e.parentX&&(e.left--,e.elmX--)),"y"!==e.axis&&"both"!==e.axis||(e.height<e.parentH&&(e.height++,e.elmH++),e.top>e.parentY&&(e.top--,e.elmY--)),e.zIndex=1e3,e.$emit("resizing",e)};window.requestAnimationFrame(s)}},handleMove:function(t){this.mouseX=t.pageX||t.clientX+document.documentElement.scrollLeft,this.mouseY=t.pageY||t.clientY+document.documentElement.scrollTop;var e=this.mouseX-this.lastMouseX+this.mouseOffX,i=this.mouseY-this.lastMouseY+this.mouseOffY;this.mouseOffX=this.mouseOffY=0,this.lastMouseX=this.mouseX,this.lastMouseY=this.mouseY;var s=e,a=i;this.resizing?(this.handle.indexOf("t")>=0&&(this.elmH-a<this.minh?this.mouseOffY=a-(i=this.elmH-this.minh):this.elmY+a<this.parentY&&(this.mouseOffY=a-(i=this.parentY-this.elmY)),this.elmY+=i,this.elmH-=i),this.handle.indexOf("b")>=0&&(this.elmH+a<this.minh?this.mouseOffY=a-(i=this.minh-this.elmH):this.elmY+this.elmH+a>this.parentH&&(this.mouseOffY=a-(i=this.parentH-this.elmY-this.elmH)),this.elmH+=i),this.handle.indexOf("l")>=0&&(this.elmW-s<this.minw?this.mouseOffX=s-(e=this.elmW-this.minw):this.elmX+s<this.parentX&&(this.mouseOffX=s-(e=this.parentX-this.elmX)),this.elmX+=e,this.elmW-=e),this.handle.indexOf("r")>=0&&(this.elmW+s<this.minw?this.mouseOffX=s-(e=this.minw-this.elmW):this.elmX+this.elmW+s>this.parentW&&(this.mouseOffX=s-(e=this.parentW-this.elmX-this.elmW)),this.elmW+=e),this.left=Math.round(this.elmX/this.grid[0])*this.grid[0],this.top=Math.round(this.elmY/this.grid[1])*this.grid[1],this.width=Math.round(this.elmW/this.grid[0])*this.grid[0],this.height=Math.round(this.elmH/this.grid[1])*this.grid[1],this.zIndex=1e3,this.$emit("resizing",this)):this.dragging&&(this.zIndex=1e3,this.parent&&(this.elmX+s<this.parentX?this.mouseOffX=s-(e=this.parentX-this.elmX):this.elmX+this.elmW+s>this.parentW&&(this.mouseOffX=s-(e=this.parentW-this.elmX-this.elmW)),this.elmY+a<this.parentY?this.mouseOffY=a-(i=this.parentY-this.elmY):this.elmY+this.elmH+a>this.parentH&&(this.mouseOffY=a-(i=this.parentH-this.elmY-this.elmH))),this.elmX+=e,this.elmY+=i,"x"!==this.axis&&"both"!==this.axis||(this.left=Math.round(this.elmX/this.grid[0])*this.grid[0]),"y"!==this.axis&&"both"!==this.axis||(this.top=Math.round(this.elmY/this.grid[1])*this.grid[1]),this.$emit("dragging",this))},handleUp:function(t){this.handle=null,this.resizing&&(this.resizing=!1,this.zIndex="auto",this.$emit("resizestop",this)),this.dragging&&(this.dragging=!1,this.zIndex="auto",this.$emit("dragstop",this)),this.elmX=this.left,this.elmY=this.top},changePos:function(t,e){this.left=t,this.top=e,this.elmX=t,this.elmY=e}},computed:{style:function(){return{top:this.top+"px",left:this.left+"px",width:this.width+"px",height:this.height+"px",zIndex:this.zIndex}}},watch:{active:function(t){this.enabled=t},z:function(t){(t>=0||"auto"===t)&&(this.zIndex=t)},x:function(t){this.left=t,this.elmX=t},y:function(t){this.top=t,this.elmY=t},updatepos:function(t){this.left=this.x,this.top=this.y,this.elmX=this.x,this.elmY=this.y,this.width=this.w,this.height=this.h,this.elmW=this.w,this.elmH=this.h}}}},174:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"TDeskDragDemo",data:function(){return{width:1366,height:687,dataLength:0}},methods:{dragDeleteEn:function(t,e){this.dataLength=e.length},dragChangeEn:function(t){this.dataLength=t.length},handleClick:function(){var t={left:0,top:0,width:1,height:1,id:""+(new Date).getTime(),viewIndex:0,portletColor:"dragColor"+this.dataLength%4,portletName:"测试"+this.dataLength,portletImage:"iconfont icon-beihuoguanli"};this.$refs.deskDrag.addDeskDrag(t),this.dataLength++},resize:function(){var t=$(window).width()-100,e=$(window).height();this.width=t,this.height=e}},mounted:function(){var t=[{left:0,top:0,width:1,height:1,id:"a1000002",viewIndex:0,portletColor:"dragColor4",portletName:"测试",portletImage:"iconfont icon-beihuoguanli"}];this.$refs.deskDrag.resetDeskDrag(t),this.resize(),window.addEventListener("resize",this.resize)}}},175:function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=i(79),n=s(a),h=i(425),o=s(h);n.default.use(o.default),e.default=new o.default({routes:[]})},410:function(t,e){},411:function(t,e){},412:function(t,e){},413:function(t,e){},414:function(t,e){},415:function(t,e){},419:function(t,e,i){var s=i(120)(i(172),i(423),null,null,null);t.exports=s.exports},420:function(t,e,i){function s(t){i(414)}var a=i(120)(i(173),i(422),s,"data-v-4343f29b",null);t.exports=a.exports},421:function(t,e,i){function s(t){i(415)}var a=i(120)(i(174),i(424),s,"data-v-f06297e2",null);t.exports=a.exports},422:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vdr t_draggable_resizable",class:{draggable:t.draggable,resizable:t.resizable,active:t.enabled,dragging:t.dragging,resizing:t.resizing},style:t.style,on:{mousedown:function(e){return e.stopPropagation(),t.elmDown(e)},dblclick:t.fillParent}},[t._l(t.handles,function(e){return t.resizable?i("div",{staticClass:"handle",class:"handle-"+e,style:{display:(t.enabled,"block")},on:{mousedown:function(i){i.stopPropagation(),i.preventDefault(),t.handleDown(e,i)}}}):t._e()}),t._v(" "),t._t("default")],2)},staticRenderFns:[]}},423:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"deskDragBox",staticClass:"t_desk_drag main_page",on:{mousewheel:t.mouseWheel,DOMMouseScroll:t.mouseWheel}},[i("div",{staticClass:"main_page_item",class:{drag_stop:t.itemDragStop,resizing:t.itemResizing},style:t.movePageStyle},[t._l(t.moveSpaceData,function(e,s){return i("div",{key:e.uiKey,staticClass:"main_move_inner",style:{width:t.tarWidth+"px"}},[i("div",{staticClass:"main_move_item",style:{width:t.rectWidth*t.blockWidth+"px"}},t._l(e.moduleItem,function(e){return i("div",{key:e.id,staticClass:"move_item",style:{height:e.height*t.blockWidth+"px",width:e.width*t.blockWidth+"px",left:e.left*t.blockWidth+"px",top:e.top*t.blockWidth+"px"}},[i("div",{staticClass:"mover_item_inner"})])}))])}),t._v(" "),t._l(t.moduleData,function(e,s){return t._l(e.moduleItem,function(e){return i("t-draggable-resizable",{key:e.uiId,staticClass:"module_item",class:{has_url:e.portletUrl&&(e.width>=t.urlMinHeight&&e.height>=t.urlMinWidth||e.height>=t.urlMinHeight&&e.width>=t.urlMinWidth)},attrs:{w:e.width*t.blockWidth,h:e.height*t.blockWidth,minw:t.blockWidth,minh:t.blockWidth,x:e.left*t.blockWidth+e.viewIndex*t.tarWidth+t.offLeft,y:e.top*t.blockWidth,handles:["tl","br"],updatepos:e.updatepos,draggable:"1"!=t.isfixed,resizable:"1"!=t.isfixed},on:{activated:function(i){t.activated(i,e)},deactivated:t.deactivated,resizestop:function(i){t.resizestop(i,e)},resizing:function(i){t.resizing(i,e)},dragstop:t.dragstop,dragging:function(i){t.dragging(i,e)}},nativeOn:{contextmenu:function(e){e.preventDefault(),e.stopPropagation(),t.contextMenu()},dblclick:function(i){i.preventDefault(),t.dragDblClick(e)}}},[i("div",{staticClass:"module_item_inner",class:e.portletColor||"dragColor4"},[e.portletUrl&&(e.width>=t.urlMinHeight&&e.height>=t.urlMinWidth||e.height>=t.urlMinHeight&&e.width>=t.urlMinWidth)?[i("div",{staticClass:"module_item_tt"},[i("i",{staticClass:"navIcon",class:e.portletImage}),t._v("\n              "+t._s(e.portletName)+"\n              "),i("div",{staticClass:"module_item_operate"},[i("i",{staticClass:"zoeIconfont z_refresh_normal icon_refresh",on:{dblclick:function(t){t.stopPropagation()},click:function(e){return e.stopPropagation(),t.moduleItemRefreshEvn(e)}}})])]),t._v(" "),i("div",{staticClass:"module_item_url"},[i("div",{staticClass:"module_mask"}),t._v(" "),i("iframe",{attrs:{id:"module_item_"+e.uiId,"data-frame-id":"comPortalPage",src:e.portletUrl,frameborder:"0",width:"100%",height:"100%",scrolling:"no"}})])]:[i("i",{staticClass:"module_item_icon",class:e.portletImage||"z_menuD_normal"}),t._v(" "),i("div",{staticClass:"module_item_bottom ellipsis"},[t._v(t._s(e.portletName))])]],2)])})})],2),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.currentView+1<t.moduleData.length,expression:"currentView+1<moduleData.length"}],staticClass:"main_btn btn_right"},[i("i",{staticClass:"iconfont icon-right",on:{click:function(e){t.turnRightView(!0)}}})]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.currentView>0&&t.mainLeft<0,expression:"currentView>0 && mainLeft<0"}],staticClass:"main_btn btn_left"},[i("i",{staticClass:"iconfont icon-left",on:{click:function(e){t.turnRightView(!1)}}})]),t._v(" "),i("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:t.dragClickOutside,expression:"dragClickOutside"},{name:"show",rawName:"v-show",value:t.showDragMenu,expression:"showDragMenu"}],staticClass:"com_main_drag_menu",style:t.rightMenuStyle},[i("ul",[i("li",{staticClass:"menu_item",on:{click:t.cancelDragFixed}},[t._v("取消固定")])])]),t._v(" "),i("div",{staticClass:"drag_page_box",style:t.dragPageStyle},[i("ul",{staticClass:"drag_page_box_inner clearfix"},t._l(t.moduleData,function(e,s){return i("li",{class:{selected:t.targetCurrentView==t.currentView?s==t.currentView:s==t.targetCurrentView},on:{click:function(e){t.currentView=t.targetCurrentView=s}}},[i("div",{staticClass:"drag_page_target"})])}))])])},staticRenderFns:[]}},424:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"contain"},[i("div",{staticClass:"menu"},[i("h1",[t._v("桌面布局")]),t._v(" "),i("ul",[i("li",[i("button",{on:{click:t.handleClick}},[t._v("添加块")])])])]),t._v(" "),i("div",{staticClass:"content"},[i("t-desk-drag",{ref:"deskDrag",staticClass:"themeType",attrs:{width:t.width,height:t.height},on:{"drag-change":t.dragChangeEn,"drag-delete":t.dragDeleteEn}})],1)])},staticRenderFns:[]}},427:function(t,e,i){i(166),t.exports=i(165)}},[427]);
//# sourceMappingURL=app.fc0986061d651c7e0692.js.map